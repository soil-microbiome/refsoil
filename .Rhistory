door=data[c,2]
key
door
colnames(result)=alist,[,c(3,length(alist))])
colnames(result)=alist[,c(3,length(alist))])
colnames(result)=alist[,c(3,length(alist))]
colnames(result)=alist[,c(,3:length(alist))]
alist[1,@]
alist[1,2]
alist
class(alist)
alist[1]
alist[1,2]
alist[c(1,2)]
alist[c(3,)]
alist[c(3,.)]
alist[c(3,length(alist))]
alist[c(3:length(alist))]
colnames(result)=alist[c(3:length(alist))]
result=matrix(data=NA,nrow=myrows,ncol=(length(alist)-2))
rownames(result)=levels(new[,1])
colnames(result)=alist[c(3:length(alist))]
result
dim(result)
names(result)
colnames(result)
door
results["key",alist[c]]
results["key",alist[counter]]
result["key",alist[counter]]
alist[counter]
rr=alist[counter]
result["key",rr
result["key",rr]
result
result[,"OC-OM3C0-M3.vs.cazy.e-5.processedsubfamily.out"]
result[key,"OC-OM3C0-M3.vs.cazy.e-5.processedsubfamily.out"]
result[key,rr]
result[key,alist[counter]]=door
View(result)
counter=3
while (counter<=length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
while (c<=nrows(data)){
key=data[c,1]
c=1
door=data[c,2]
rr=alist[counter]
result[key,rr]=door
}
}
counter=3
data<-read.delim(set_name,header=F)
while (counter<=length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
while (c<=nrow(data)){
c=1
key=data[c,1]
door=data[c,2]
rr=alist[counter]
result[key,rr]=door
}
}
counter=3
while (counter<=length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
c=1
while (c<=nrow(data)){
key=data[c,1]
door=data[c,2]
rr=alist[counter]
result[key,rr]=door
c=c+1
}
}
counter=3
while (counter<=length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
c=1
while (c<=nrow(data)){
key=data[c,1]
door=data[c,2]
rr=alist[counter]
result[key,rr]=door
c=c+1
}
counter=counter+1
}
result
alist<-list.files(path="C:/r/temp/",all.files=TRUE)
counter=3
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data0<-read.delim(set_name,header=F)
mycols=ncol(data0)
rm(counter)
rm(data0)
rm(set_name)
counter=3
old=matrix(NA,ncol=mycols,nrow=0)
while (counter <= length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
new=rbind(old,data)
old<-new
counter=counter+1
}
myrows=length(levels(new[,1]))
rm(counter)
rm(data)
rm(old)
rm(set_name)
result=matrix(data=NA,nrow=myrows,ncol=(length(alist)-2))
rownames(result)=levels(new[,1])
colnames(result)=alist[c(3:length(alist))]
dim(result)
colnames(result)
View(result)
result=matrix(data=0,nrow=myrows,ncol=(length(alist)-2))
rownames(result)=levels(new[,1])
colnames(result)=alist[c(3:length(alist))]
dim(result)
colnames(result)
View(result)
counter=3
while (counter<=length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
c=1
while (c<=nrow(data)){
key=data[c,1]
door=data[c,2]
rr=alist[counter]
result[key,rr]=door
c=c+1
}
counter=counter+1
}
result
View(result)
tail(result)
dim(result)
write.csv("result.csv",result)
write.csv(result,"result.csv")
getwd()
new
colnames(result)
rownames(result)
key
door
rr
resylt[key,rr]
result[key,rr]
rr
key
result[key,rr]
View(result)
library(reshape)
library(reshape2)
alist<-list.files(path="C:/r/temp/",all.files=TRUE)
counter=3
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.delim(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrows(data),ncol=1)
nrows(data)
nrow(data)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data
data2=cbind(data,filename)
head(data2)
data<-read.csv(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data2=cbind(data,filename)
head(data2)
result=matrix(data=0,nrow=0,ncol=7)
rownames(result)=c("V1","V2","V3","V4","V5","V6","filename")
result=matrix(data=0,nrow=0,ncol=7)
colnames(result)=c("V1","V2","V3","V4","V5","V6","filename")
dim(result)
counter=3
result=matrix(data=0,nrow=0,ncol=7)
colnames(result)=c("V1","V2","V3","V4","V5","V6","filename")
dim(result)
while (counter <= length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.csv(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data2=cbind(data,filename)
result=rbind(result.data2)
}
result=matrix(data=0,nrow=0,ncol=7)
colnames(result)=c("V1","V2","V3","V4","V5","V6","filename")
dim(result)
while (counter <= length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.csv(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data2=cbind(data,filename)
result=rbind(result,data2)
}
alist<-list.files(path="C:/r/temp/",all.files=TRUE)
result=matrix(data=0,nrow=0,ncol=7)
colnames(result)=c("V1","V2","V3","V4","V5","V6","filename")
dim(result)
counter=3
while (counter <= length(alist)){
set_name<-gsub("( )", "", paste("c:/R/temp/",alist[counter]))
data<-read.csv(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data2=cbind(data,filename)
result=rbind(result,data2)
counter=counter+1
}
counter
data<-read.csv(set_name,header=F)
filename=matrix(data=alist[counter],nrow=nrow(data),ncol=1)
data2=cbind(data,filename)
results
result
library(reshape2)
mymatrix=acast(result, V1~filename, value.var="V3")
mymatrix
View(mymatrix)
View(mymatrix)
head(result)
heatmap(mymatrix)
heatmap(mymatrix,col="blues")
heatmap(mymatrix)
library(RColorBrewer)
heatmap(mymatrix,col='blues')
heatmap(mymatrix,col=brewer.pal(9,"Blues"))
mymatrix=acast(result, V1~filename, value.var="V3")
View(mymatrix)
View(mymatrix)
heatmap(mymatrix,col=brewer.pal(9,"Blues"),Rowv=NA,Colv=NA)
?acast
max(mymatrix)
heatmap(mymatrix,col=brewer.pal(5,"Blues"),breakd=c(0,1,2,3,4,11)Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(5,"Blues"),breakd=c(0,1,2,3,4,11),Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(5,"Blues"),breaks=c(0,1,2,3,4,11),Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(5,"Blues"),breaks=c(0,1,2,3,4,11),Rowv=NA,Colv=NA)
mymatrix=acast(result, V1~filename, value.var="V3",max)
heatmap(mymatrix,col=brewer.pal(9,"Blues"),Rowv=NA,Colv=NA)
mymatrix=acast(result, V1~filename, value.var="V3")
max
mymatrix=acast(result, V1~filename)
mymatrix=acast(result, V1~filename,max)
mymatrix
heatmap(mymatrix,col=brewer.pal(9,"Blues"),Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(4,"Blues"),
breaks=c(0,1,2,3,10)
Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(4,"Blues"),
breaks=c(0,1,2,3,10),
Rowv=NA,Colv=NA)
heatmap(mymatrix,col=brewer.pal(4,"Blues"),
breaks=c(0,1,2,3,10),
Rowv=NA,
#Colv=NA)
heatmap(mymatrix,col=brewer.pal(4,"Blues"),
breaks=c(0,1,2,3,10),
Rowv=NA,
#Colv=NA
)
import ape
library(ape)
install.packages("ape")
library(ape)
?read.tree
print(version)
sessionInfo()
library(vegan)
sessionInfo()
version()
version
test= c("a","uno","cuatro")
test
gsub("a","1",teste)
gsub("a","1",test)
gsub("1","a",test)
test
gsub("cuatro","BURN",test)
test
gsub("cuatro","BURN",test)
tes
test
test2 = gsub("cuatro","BURN",test)
test2
alist<-list.files(path="C:/r/toprocess/",all.files=TRUE)
while (t<40)
{
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
attachable=read.csv("Bceno_a2_att_v3.csv",header=T)
array_ori$PrbSeq=NULL
array_ori$Block=NULL
array_ori$Column=NULL
array_ori$Row=NULL
array_ori$Name=NULL
array_ori$ID=NULL
array_ori$Autoflag=NULL
array_ori$Type=NULL
array_ori$Flags=NULL
array_ori$Diameter=NULL
array_ori$Circularity=NULL
col<-ncol(array_ori) #columns
s<-col/3 #strains
c=1
while (c<(col+1)){
col1<-array_ori[c]
col2<-array_ori[c+1]
col3<-array_ori[c+2]
name=names(col1)
names(col1)[1]="Median"
names(col2)[1]="SNR"
names(col3)[1]="Flags"
array<-cbind(attachable,col1,col2,col3)
BC=subset(array,array$Type=="BC")
Background<-quantile(BC$Median,probs=0.05,type=3)
Bk=rep(Background,dim(col1)[1])
Coreset=subset(array,array$Core=="1")
colI=Coreset[,"Median"]-Background
Core.Median=median(colI)
Intensity=array$Median-Background
Intensity_adjusted=Intensity/(Core.Median)*10000
#Score<-ifelse(array$Flags=="-100","-80000",array$Intensity_adjusted)
#Score<-data.frame(Score)
#array=cbind(array,Intensity,Intensity_adjusted,Score)
array=cbind(array,Intensity,Intensity_adjusted)
array2=array
array2$Block=NULL
array2$Row=NULL
array2$Column=NULL
array2$Core=NULL
array2$SNR=NULL
array2$Intensity=NULL
#array2$Intensity_adjusted=NULL
array2$SNR=NULL
#array2$Flags=NULL
array2$Median=NULL
to.write<-gsub("( )", "", paste("c:/R/toprocess/results/normalized_",name,".csv"))
write.csv(array2,file=to.write)
c=c+3
}
t=t+1
}
t=3
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
alist<-list.files(path="C:/r/toprocess/",all.files=TRUE)
t=3
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
attachable=read.csv("Bceno_a2_att_v3.csv",header=T)
array_ori$PrbSeq=NULL
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
alist<-list.files(path="C:/r/toprocess/",all.files=TRUE)
t=3
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
alist
t=3
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
file_name
alist<-list.files(path="C:/r/toprocess/",all.files=TRUE)
t=3
alist
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
file_name
array_ori=read.csv(file_name,header=TRUE)
attachable=read.csv("Bceno_a2_att_v3.csv",header=T)
attachable=read.csv("c:/R/Bceno_a2_att_v3.csv",header=T)
attachable=read.csv("c:/R/Bceno_a2_att_v3.csv",header=T)
array_ori$PrbSeq=NULL
array_ori$Block=NULL
array_ori$Column=NULL
array_ori$Row=NULL
array_ori$Name=NULL
array_ori$ID=NULL
array_ori$Autoflag=NULL
array_ori$Type=NULL
array_ori$Flags=NULL
array_ori$Diameter=NULL
array_ori$Circularity=NULL
col<-ncol(array_ori) #columns
s<-col/3 #strains
c=1
while (c<(col+1)){
col1<-array_ori[c]
col2<-array_ori[c+1]
col3<-array_ori[c+2]
name=names(col1)
names(col1)[1]="Median"
names(col2)[1]="SNR"
names(col3)[1]="Flags"
array<-cbind(attachable,col1,col2,col3)
BC=subset(array,array$Type=="BC")
Background<-quantile(BC$Median,probs=0.05,type=3)
Bk=rep(Background,dim(col1)[1])
Coreset=subset(array,array$Core=="1")
colI=Coreset[,"Median"]-Background
Core.Median=median(colI)
Intensity=array$Median-Background
Intensity_adjusted=Intensity/(Core.Median)*10000
#Score<-ifelse(array$Flags=="-100","-80000",array$Intensity_adjusted)
#Score<-data.frame(Score)
#array=cbind(array,Intensity,Intensity_adjusted,Score)
array=cbind(array,Intensity,Intensity_adjusted)
array2=array
array2$Block=NULL
array2$Row=NULL
array2$Column=NULL
array2$Core=NULL
array2$SNR=NULL
array2$Intensity=NULL
#array2$Intensity_adjusted=NULL
array2$SNR=NULL
#array2$Flags=NULL
array2$Median=NULL
to.write<-gsub("( )", "", paste("c:/R/toprocess/results/normalized_",name,".csv"))
write.csv(array2,file=to.write)
c=c+3
}
t=t+1
alist<-list.files(path="C:/r/toprocess/",all.files=TRUE)
t=3
alist
file_name<-gsub("( )", "", paste("c:/R/toprocess/",alist[t]))
array_ori=read.csv(file_name,header=TRUE)
array_ori$PrbSeq=NULL
array_ori$Block=NULL
array_ori$Column=NULL
array_ori$Row=NULL
array_ori$Name=NULL
array_ori$ID=NULL
array_ori$Autoflag=NULL
array_ori$Type=NULL
array_ori$Flags=NULL
array_ori$Diameter=NULL
array_ori$Circularity=NULL
col<-ncol(array_ori) #columns
c=1
s<-col/3 #strains
col1<-array_ori[c]
col2<-array_ori[c+1]
col3<-array_ori[c+2]
name=names(col1)
names(col1)[1]="Median"
names(col2)[1]="SNR"
names(col3)[1]="Flags"
array<-cbind(attachable,col1,col2,col3)
BC=subset(array,array$Type=="BC")
Background<-quantile(BC$Median,probs=0.05,type=3)
Bk=rep(Background,dim(col1)[1])
Coreset=subset(array,array$Core=="1")
colI=Coreset[,"Median"]-Background
Core.Median=median(colI)
Intensity=array$Median-Background
Intensity_adjusted=Intensity/(Core.Median)*10000
#Score<-ifelse(array$Flags=="-100","-80000",array$Intensity_adjusted)
#Score<-data.frame(Score)
#array=cbind(array,Intensity,Intensity_adjusted,Score)
array=cbind(array,Intensity,Intensity_adjusted)
array2=array
array2$Block=NULL
array2$Row=NULL
array2$Column=NULL
array2$Core=NULL
array2$SNR=NULL
array2$Intensity=NULL
array2$SNR=NULL
#array2$Flags=NULL
array2$Median=NULL
to.write<-gsub("( )", "", paste("c:/R/toprocess/results/normalized_",name,".csv"))
write.csv(array2,file=to.write)
to.write<-gsub("( )", "", paste("c:/R/toprocess/results/normalized_",name,".csv"))
write.csv(array2,file=to.write)
install.packages("knitr")
#random forest and boruta.r
library(Boruta)
setwd("C:/Users/Erick Cardenas/github/refsoil")
setwd("C:/Users/Erick Cardenas/Documents/github/refsoil")
data=(read.csv("word_counts.csv", header=TRUE, row.names=1))
setwd("C:/Users/Erick Cardenas/Documents/github/refsoil")
data=(read.csv("words_count.csv", header=TRUE, row.names=1))
data=(read.csv("words_count.csv", header=TRUE, row.names=1))
cazy_boruta =Boruta (final, data = data, doTrace=2, ntree=1000, maxRuns = 1000)
data=(read.csv("words_count.csv", header=TRUE, row.names=1))
cazy_boruta =Boruta (final, data = data, doTrace=2, ntree=1000, maxRuns = 1000)
names(data)
cazy_boruta =Boruta (~final, data = data, doTrace=2, ntree=1000, maxRuns = 1000)
cazy_boruta =Boruta (final ~ ., data = data, doTrace=2, ntree=1000, maxRuns = 1000)
plot (cazy_boruta)
cazy_boruta__decision = t(as.data.frame(cazy_boruta$finalDecision))
cazy_boruta_score = as.data.frame(cazy_boruta$ImpHistory)
cazy_boruta_score$shadowMax = NULL
cazy_boruta_score$shadowMean = NULL
cazy_boruta_score$shadowMin = NULL
cazy_boruta_out = rbind(cazy_boruta_score, cazy_boruta_layer_decision)
cazy_boruta_out = rbind(cazy_boruta_score, cazy_boruta_decision)
cazy_boruta_decision = t(as.data.frame(cazy_boruta$finalDecision))
cazy_boruta_score = as.data.frame(cazy_boruta$ImpHistory)
cazy_boruta_score$shadowMax = NULL
cazy_boruta_score$shadowMean = NULL
cazy_boruta_score$shadowMin = NULL
cazy_boruta_out = rbind(cazy_boruta_score, cazy_boruta_decision)
write.csv(cazy_boruta_layer_out, "words_count_boruta.csv")
write.csv(cazy_boruta_out, "words_count_boruta.csv")
